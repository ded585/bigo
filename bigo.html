- set(list) is pointless


<!DOCTYPE html> <!-- vim: set foldmethod=marker cc=60 :-->
<!--
Process this file with cog:

    $ pip install -r requirements.txt
    $ python -m cogapp -r bigo.html

-->
<!--[[[cog {{{ Python3.6 version check and def draw_the_graph
import sys
assert sys.version_info > (3, 6), "This needs Python 3.6+"

SX, SY = 1000, 650
LABEL_MARGIN = 10

def draw_the_graph(scale, axis_labels=True, curve_labels=False, stroke_width=1, css_class=''):
    import math
    from curves import lrange, beziers

    cog.outl(f'''\
    <svg class="{css_class}" viewBox="0 0 {SX} {SY}">
        <g transform="translate(0 {SY}) scale({scale}, {-scale})">
            <rect fill="white" stroke="#333" stroke-width="{stroke_width/2}" height="100%" width="100%" x="0" y="0"/>
    '''.rstrip())
    if axis_labels:
        cog.outl(f'''\
            <text transform="scale({1/scale} {1/-scale}) translate({SX - 50} {-LABEL_MARGIN})">data</text>
            <text transform="rotate(-90) scale({1/scale} {1/-scale}) translate({-SY + LABEL_MARGIN} {-LABEL_MARGIN})">time</text>
        '''.rstrip())

    fns = [
        ('#ff3333', (50, 300), 'n²', lambda n: n * n),
        ('#ff9933', (125, 300), 'n log n', lambda n: n * math.log(n/2.+1) + 3),
        ('#0088ff', (300, 300), 'n', lambda n: n + 6),
        ('#00aa99', (440, 150), 'log n', lambda n: 6 * math.log(n+1)),
        ('#33cc00', (475, 60), '1', lambda n: 10),
    ]
    for color, exprxy, expr, fn in fns:
        pts = []
        for x in lrange(SX, 20):
            y = fn(x)
            if y > 2 * SY:
                break
            pts.append((x, y))

        # Main curves
        if 1:
            cog.out(f"            <path d='M{pts[0][0]:.3f},{pts[0][1]:.3f} ")
            for p1, p2, p3 in beziers(pts):
                cog.out(f"C{p1[0]:.3f},{p1[1]:.3f} {p2[0]:.3f},{p2[1]:.3f} {p3[0]:.3f},{p3[1]:.3f} ")
            cog.outl(f"' stroke='{color}' stroke-width='{stroke_width}' fill='none' />")

        if curve_labels:
            cog.outl(f'''\
            <text transform="scale({2/scale} {-2/scale})" width="150" height="50" x="{exprxy[0]}" y="{-exprxy[1]}">{expr}</text>
            '''.rstrip())

        # Straight lines
        if 0:
            cog.out("<path d='M")
            for pt in pts:
                cog.out("{:.3f},{:.3f} ".format(*pt))
            cog.outl("' stroke='black' stroke-width='2' fill='none' vector-effect='non-scaling-stroke' />")
        
        # Bezier handles
        if 0:
            for p1, p2, p3 in beziers(pts):
                cog.outl("<circle cx='{}' cy='{}' r='.02' stroke-width='.5' fill='none' stroke='black' vector-effect='non-scaling-stroke' />".format(*p1))
                cog.outl("<circle cx='{}' cy='{}' r='.02' stroke-width='.5' fill='none' stroke='black' vector-effect='non-scaling-stroke' />".format(*p2))
                cog.outl("<circle cx='{}' cy='{}' r='.02' stroke-width='.5' fill='black' stroke='black' vector-effect='non-scaling-stroke' />".format(*p3))

    cog.out('''\
        </g>
    </svg>
    ''')

]]]-->
<!--[[[end]]]-->
}}}

<html>
<!-- *** Head stuff {{{ -->
<head>
<title>Big-O: How Code Slows as Data Grows</title>
<meta charset="utf-8" />

    <!-- *** Includes {{{ -->
    <!-- Slippy core file and dependencies -->
    <script type="text/javascript" src="slippy/jquery.min.js"></script>
    <script type="text/javascript" src="slippy/jquery.history.js"></script>
    <script type="text/javascript" src="slippy/slippy.js"></script>
    <script src="https://cdn.rawgit.com/ekalinin/typogr.js/0.6.6/typogr.min.js"></script>

    <!-- Slippy structural styles -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy.css"/>
    <!-- Slippy theme -->
    <link type="text/css" rel="stylesheet" href="slippy/slippy-pure.css"/>
    <!-- Our styles -->
    <link type="text/css" rel="stylesheet" href="slides.css"/>

    <!-- Highlight, for syntax coloring. -->
    <script type="text/javascript" src="highlight/highlight.pack.js"></script>
    <link rel="stylesheet" href="highlight/vs.css">

    <script type="text/javascript" src="lineselect.js"></script>

    <!-- http://html.adobe.com/edge/webfonts/ -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>

    <script type="text/javascript" src="slides.js"></script>
    <!-- }}} -->

    <!-- *** Custom style for this deck {{{ -->
    <style type="text/css">
    /* for highlighting lines of code */
    .o_1 {
        background: #3f3;
        border-radius: .15em;
    }
    .o_n {
        background: #fbb;
        border-radius: .15em;
    }
    .cell_highlight {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        border-radius: 0;
        opacity: .5;
        padding: .35em .5em;
        box-sizing: border-box;
    }
    svg text {
        font-size: 20px;
    }
    </style>
    <!-- }}} -->

</head>
<!-- }}} -->
<body class="slides">

<div class="slide title" data-layout="clean">
    <h1 style="padding-top: 1em">Big-O:<br/>How Code Slows<br/>as Data Grows</h1>
    <h2>Ned Batchelder<br/><a class="implicit" href="http://twitter.com/nedbat"><span class="punct">@</span>nedbat</a></h2>
    <h2><a class="implicit" href="http://bit.ly/bigopy"><span class="punct">http://</span>bit.ly<span class="punct">/</span>bigopy</a></h2>
</div>

<div class="text"><!-- {{{ -->

<p>There's this thing in computer science that working programmers talk about,
called "big-O". When a software developer feels bad because they don't have a
Computer Science degree, it seems like big-O notation gets mentioned as the
indicator of the grown-ups table.</p>

</div><!-- }}} -->

<div class="slide">
    <h1>Big-O</h1>
    <ul>
    <li class="incremental">How code slows as data grows</li>
    <li class="incremental">Mathy, but doesn't have to be</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>Big-O isn't as mystical as it seems at first. It doesn't have to be more
than a common-sense assessment of how your code will behave as it works on more
data.</p>

<p>In rhyming form, "How code slows as data grows."  Big-O isn't about how fast
your code goes at any particular time.  It's about how the running time changes
as the data size changes.</p>

<p>Big-O notation has a mathematical flavor, but isn't really that complicated
in day-to-day use.  You can use it without understanding all of the intricacies.</p>

<p>Imagine you have a chunk of code that does something to a bunch of data.
You’d like to know how much slower the code will go if you give it ten times
more data. That’s what big-O describes. You might imagine that the answer is of
course, ten times slower. But that’s not the way real code works. One algorithm
might go a hundred times slower. Another might not go any slower at all. Big-O
is a way to analyze the code and determine the slow-down factor.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Terminology</h1>
    <ul>
    <li class="incremental">O(<i>blah</i> <i>blah</i> N <i>blah</i>)</li>
    <li class="incremental">N: how much data</li>
    <li class="incremental">"Order of"</li>
    <li class="incremental">Not a function!</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>Let's get some terminology straight at the beginning.  The Big-O characterization
of some code will look like "O( blah blah N blah )".  The N in there is the size
of your data.  The O stands for "Order of," as in, "The code's run time grows on the order of blah blah N blah."
The blah blah is an expression using N, like O(N) or O(N<sup>2</sup>).</p>

<p>Although O(N) looks like calling a function named O, this isn't a function call.
It's just a notation about N.</p>

</div><!-- }}} -->



<div class="slide image">
    <h1>Counting beans</h1>
    <div class='incremental' style="float: left; width: 48%">
        <img width='100%' src='bean_counting.png' />
        <p class="big center">O(N)</p>
    </div>
    <div class='incremental' style="float: right; width: 48%">
        <img width='100%' src='bean_labels.png' />
        <p class="big center">O(1)</p>
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>Let's consider a real-world example. Suppose you have jars of jelly beans.
You want to know how many are in each jar.  The first way to do it is to count
each bean, as this guy on the left is doing.</p>

<p>It's pretty clear that the time it will take to count the beans is
proportional to the number of beans. If one jar has five times as many beans as
another, it will take five times longer to count.</p> 

<p>The time it takes to complete the work is proportional to the number of
beans (or amount of data), so we say it is O(N).  The time grows in the
same way that N does. It's on the order of N.</p>

<p>Now suppose we arrange our data (beans) differently.  We put a label on each
jar, indicating how many beans are in the jar.  Now the time to complete the
task changes enormously, since our worker just has to read the label!  Now no
matter how many beans are in the jar, it takes the same amount of time to
determine how many beans there are (assuming we trust the labels).</p>

<p>This is now a constant-time task: no matter how large the jar, it will take
the same amount of time to determine the number. We just read it off the label.
This is known as O(1), which is a funny way to write, "the run time doesn't
depend on N at all."</p>

<p>You might say labelling the jars is cheating. It's not: big-O is all about
analyzing algorithms and data structures to understand their behavior.  By
labelling the jar, we chose a different data structure that let us use a better
algorithm.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Finding words</h1>
    <div class='incremental center' style="float: left; width: 48%">
        <p class="center">Novel</p>
        <div style='border: 1px solid #888; border-bottom: 1px dashed #ccc; height: 12em; overflow: hidden'>
            <img width='100%' src='novel.jpg' />
        </div>
        <p class="big center">O(N)</p>
    </div>
    <div class='incremental center' style="float: right; width: 48%">
        <p class="center">Dictionary</p>
        <div style='border: 1px solid #888; border-bottom: 1px dashed #ccc; height: 12em; overflow: hidden'>
            <img width='100%' src='dictionary.jpg' />
        </div>
        <p class="big center">O(log N)</p>
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>Let's consider another real-world example: finding words in a book.  If I
hand you a novel, and ask you to find the word "horse" in it, you would start
at the beginning and read until you found it.  This is another O(N) task. If
you double the length of the novel, it could take you twice as long to find
it.</p>

<p>Now I hand you another book: a dictionary.  Finding the word "horse" is
easier now.  You open to the middle of the dictionary, and see whether the
desired word is before or after the word on the page.  If it's before, then you
open to the middle of the left-hand side, and continue your divide-and-conquer
strategy until you find the word.</p>

<p>In this case, doubling the size of the dictionary doesn't double the time it
takes.  It just adds one more divide-in-half step to the work.  This is known
as a log-N task: the number of steps grows as the number of digits in N
grows.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Other terms</h1>
    <ul>
    <li class="incremental">O(1): constant time</li>
    <li class="incremental">O(N): linear</li>
    <li class="incremental">O(N<sup>2</sup>): quadratic</li>
    <li class="incremental">Big-O: algorithmic complexity</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>A little more terminology to get out of the way.  Some of the more
common big-O characterizations have short-hand names.  O(1) is sometimes
called "constant time" or just "constant" because it doesn't change as
the data size changes.  O(N) is often called "linear" because the time
is a linear expression of the data size.  And O(N<sup>2</sup>) is called
"quadratic" because the time is a quadratic expression of the data size.
</p>

<p>The whole idea of big-O is also known as "algorithmic complexity" or
"algorithmic analysis." Those sound complicated and fancy, but it's all the
same stuff.  Sometimes the big-O characterization is called the "complexity" of
an algorithm, or the "time complexity."</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Determining Big-O</h1>
    <ul>
    <li class="incremental">Identify your code</li>
    <li class="incremental">Identify N</li>
    <li class="incremental">Count the steps in a typical run</li>
    <li class="incremental">Keep the most significant part</li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>OK, so how can you determine the Big-O complexity of a piece of code?</p>

<p>First, figure out what piece of code you are going to consider. This may
seem obvious, but if you are unclear about the boundaries of the code, you
may get an answer that is useless to you.  We'll be looking at specific
functions.</p>

<p>Second, identify what N means.  This will be the size of the data the
function is working on.  Usually, it will be fairly obvious.  But sometimes,
there will be more than one way the data can change size, and you need to
figure out which one you are concerned with.  N will be the size of that
data.</p>

<p>Third is the real work: you read your code carefully, considering
how many steps of work it will do in a typical execution run.  Keep track
of the number of steps, expressed in terms of N.</p>

<p>Once you have a complete expression for the number of steps, you simplify
it by throwing parts of it away.  Big-O is all about how the run time changes
as data gets larger and larger.  So only the most significant terms need to be
kept.</p>

<p>For example, if you counted 2N+1 steps, then you have an O(N) algorithm. There's
no point keeping the +1, because as N grows larger and larger, the +1 becomes
more and more insigificant.  Also, the 2 coefficient doesn't matter: 2N grows the
same as N does: if N doubles, then 2N doubles, and N doubles.  So O(2N+1) is the
same as O(N), and we keep the simpler form.</p>

<p>About "typical": big-O doesn't by itself imply typical runs.  You can also
talk about the big-O of the worst case, which we'll touch on later. But when
people causually mention the big-O complexity of code, they usually mean the
typical, or expected running time.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>An Example</h1>
    <pre class="python">
    moms = [
        ("Ned", "Eleanor"),
        ("Max", "Susan"),
        ("Susan", "Shelly"),
        ...
    ]
    def find_mom(moms, child):
        """Find a the mom of `child`."""
        for child_name, mom_name in moms:   <span class='incremental'># 3 * N/2</span>
            if child == child_name:         <span class='incremental'># 1 * N/2</span>
                return mom_name             <span class='incremental'># 1</span>
        return None
    </pre>
    <p class='big'>
    <span class='incremental'>3N/2 + N/2 + 1</span>
    <span class='incremental' style='margin-left: 2em'>&rarr;&nbsp; 2N + 1</span>
    <span class='incremental' style='margin-left: 2em'>&rarr;&nbsp; O(N)</span>
    </p>
</div>

<div class="text"><!-- {{{ -->

<p>Here's a real example. This code searches a list of tuples looking for a
match on the first element of the tuple. In this case, N is the length of the
list of tuples.</p>

<p>Since we don't know where any given value is in the list, we don't know
whether we'll find it at the beginning of the list, or near the end. So we
guess that over many runs of the function, we'll have to look at (on average)
half the entries in the list.</p>

<p>Looping over the moms will happen N/2 times. Each time around, there's one
step to get the next element, and one step each to assign the tuple to
child_name and mom_name. So the for-loop line gives us 3 * N / 2 steps.</p>

<p>The comparison is just one step, but since we loop N/2 times, it contributes
another N/2 steps.  The return statement happens only once, for 1 more
step.</p>

<p>The grand total is 3N/2 + N/2 + 1, or 2N+1. Since we are only interested
in the large-scale growth trends as N gets very large, we drop the +1, and the
2 coefficient, to get O(N).</p>

<p>This is a linear algorithm: when the moms list doubles in size, we can expect
it to take twice as long.</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Another example</h1>
    <pre class="python">
    def how_many_grandmothers(moms):
        """How many moms are grand-moms?"""
        grandmothers = 0
        for child, mom in moms:             <span class='incremental'># N</span>
            grandma = find_mom(moms, mom)   <span class='incremental'># N * N</span>
            if grandma:                     <span class='incremental'># N</span>
                grandmothers += 1           <span class='incremental'># N</span>
        return grandmothers                 <span class='incremental'># 1</span>
    </pre>
    <p class='big'>
    <span class='incremental'>N<sup>2</sup> + kN + 1</span>
    <span class='incremental' style='margin-left: 2em'>&rarr;&nbsp; O(N<sup>2</sup>)</span>
    </p>
</div>

<div class="text"><!-- {{{ -->

<p>Let's consider another example.  With our moms data structure, let's
consider this function to count how many of the entries in our list are
grandmothers: the mom in the pair also appears as a child in another pair.</p>

<p>We know that we are only going to keep the most significant component,
and we don't care about the coefficients, so we won't bother to track them.
Instead we'll just note the exponent for each part of the code.</p>

<p>Here we're going to loop over the entire moms list so our loop will execute
N times.  The for statement itself will contribute N steps.</p>

<p>The next line is the interesting one though: we call find_mom.  We just did
the analysis of find_mom, it's O(N).  So this line contributes N steps, but
it's executed N times, once for each execution of the loop.  So this line
contributes N<sup>2</sup> steps.</p>

<p>We can continue with the rest of the analysis, but note that we already have
an N<sup>2</sup> component, so N components or constant components will
eventually be discarded, so we can skip collecting them.</p>

<p>Because the largest component is N<sup>2</sup>, the result is O(N<sup>2</sup>).</p>

</div><!-- }}} -->



<div class="slide">
    <h1>Ideal: O(1)</h1>
    <ul>
    <li class="incremental">Seems impossible!?</li>
    <li class="incremental"><tt>len(mylist)</tt></li>
    <li class="incremental"><tt>mydict[some_key]</tt></li>
    </ul>
</div>

<div class="text"><!-- {{{ -->

<p>The best possible complexity is constant-time: no matter how much data, it
always takes the same amount of time.  This seems kind of impossible. How can
an algorithm take a fixed amount of time no matter how much data it has to work
on?</p>

<p>We saw one example with the labelled jars of jelly beans.  Python lists work
the same way: getting the length of a Python list is an O(1) operation because
the list stores its length outside of the actual data of the list, just as the
bean jar has a count on the outside.</p>

<p>A more interesting example is looking up a key in a dict.  In the typical
case, looking up a key in a dict takes the same amount of time no matter how
large the dict is.  This is why dictionaries underpin every name lookup in
Python: they are fast.  I don't have time to go into how this works, but it's
because dictionaries are a clever data structure called a hash table.  Later
we'll talk about the worst-case scenarios, but for the typical (that is to say,
almost every) case, dictionary access is O(1).</p>

</div><!-- }}} -->


<div class="slide">
    <h1>The Graph</h1>
    <!--[[[cog
    draw_the_graph(10, axis_labels=True, curve_labels=True)
    ]]]-->
    <svg class="" viewBox="0 0 1000 650">
        <g transform="translate(0 650) scale(10, -10)">
            <rect fill="white" stroke="#333" stroke-width="0.5" height="100%" width="100%" x="0" y="0"/>
            <text transform="scale(0.1 -0.1) translate(950 -10)">data</text>
            <text transform="rotate(-90) scale(0.1 -0.1) translate(-640 -10)">time</text>
            <path d='M-0.413,0.170 C-0.286,0.087 -0.160,0.003 0.000,0.000 C0.160,-0.003 0.352,0.073 0.583,0.340 C0.813,0.606 1.082,1.062 1.406,1.976 C1.730,2.891 2.110,4.263 2.569,6.597 C3.027,8.932 3.563,12.228 4.211,17.731 C4.859,23.235 5.618,30.945 6.531,42.651 C7.443,54.356 8.509,70.057 9.808,96.190 C11.106,122.323 12.638,158.890 14.436,208.409 C16.235,257.929 18.301,320.403 20.975,439.937 C23.648,559.471 26.929,736.065 30.210,912.659 ' stroke='#ff3333' stroke-width='1' fill='none' />
            <text transform="scale(0.2 -0.2)" width="150" height="50" x="50" y="-300">n²</text>
            <path d='M-0.413,3.095 C-0.286,3.049 -0.160,3.003 0.000,3.000 C0.160,2.997 0.352,3.038 0.583,3.149 C0.813,3.260 1.082,3.442 1.406,3.748 C1.730,4.055 2.110,4.486 2.569,5.122 C3.027,5.758 3.564,6.599 4.211,7.772 C4.858,8.944 5.616,10.447 6.531,12.473 C7.445,14.499 8.516,17.048 9.808,20.414 C11.099,23.781 12.612,27.964 14.436,33.408 C16.261,38.853 18.397,45.559 20.975,54.204 C23.552,62.850 26.571,73.435 30.210,86.958 C33.850,100.482 38.110,116.943 43.256,137.923 C48.402,158.903 54.434,184.401 61.683,216.472 C68.932,248.542 77.398,287.185 87.713,336.612 C98.028,386.038 110.192,446.247 124.480,519.211 C138.768,592.174 155.179,677.891 176.415,795.276 C197.652,912.661 223.714,1061.713 249.776,1210.766 ' stroke='#ff9933' stroke-width='1' fill='none' />
            <text transform="scale(0.2 -0.2)" width="150" height="50" x="125" y="-300">n log n</text>
            <path d='M-0.413,5.587 C-0.286,5.714 -0.160,5.840 0.000,6.000 C0.160,6.160 0.352,6.352 0.583,6.583 C0.813,6.813 1.082,7.082 1.406,7.406 C1.730,7.730 2.110,8.110 2.569,8.569 C3.027,9.027 3.564,9.564 4.211,10.211 C4.858,10.858 5.616,11.616 6.531,12.531 C7.445,13.445 8.516,14.516 9.808,15.808 C11.099,17.099 12.612,18.612 14.436,20.436 C16.261,22.261 18.397,24.397 20.975,26.975 C23.552,29.552 26.570,32.570 30.210,36.210 C33.851,39.851 38.114,44.114 43.256,49.256 C48.398,54.398 54.420,60.420 61.683,67.683 C68.946,74.946 77.451,83.451 87.713,93.713 C97.974,103.974 109.991,115.991 124.480,130.480 C138.969,144.969 155.928,161.928 176.415,182.415 C196.903,202.903 220.918,226.918 249.776,255.776 C278.634,284.634 312.336,318.336 353.401,359.401 C394.466,400.466 442.894,448.894 499.775,505.775 C556.656,562.656 621.989,627.989 706.533,712.533 C791.077,797.077 894.832,900.832 998.587,1004.587 ' stroke='#0088ff' stroke-width='1' fill='none' />
            <text transform="scale(0.2 -0.2)" width="150" height="50" x="300" y="-300">n</text>
            <path d='M-0.413,-3.192 C-0.286,-2.094 -0.160,-0.996 0.000,0.000 C0.160,0.996 0.352,1.890 0.583,2.755 C0.813,3.620 1.082,4.457 1.406,5.267 C1.730,6.078 2.110,6.863 2.569,7.633 C3.027,8.403 3.564,9.159 4.211,9.904 C4.858,10.650 5.616,11.385 6.531,12.114 C7.445,12.843 8.516,13.564 9.808,14.282 C11.099,14.999 12.612,15.711 14.436,16.420 C16.261,17.130 18.397,17.836 20.975,18.539 C23.552,19.243 26.570,19.945 30.210,20.644 C33.851,21.344 38.114,22.043 43.256,22.740 C48.398,23.437 54.420,24.133 61.683,24.829 C68.946,25.524 77.451,26.218 87.713,26.912 C97.974,27.606 109.991,28.300 124.480,28.993 C138.969,29.686 155.928,30.379 176.415,31.071 C196.903,31.763 220.918,32.455 249.776,33.147 C278.634,33.839 312.336,34.531 353.401,35.223 C394.466,35.914 442.894,36.606 499.775,37.297 C556.656,37.988 621.989,38.680 706.533,39.371 C791.077,40.062 894.832,40.753 998.587,41.444 ' stroke='#00aa99' stroke-width='1' fill='none' />
            <text transform="scale(0.2 -0.2)" width="150" height="50" x="440" y="-150">log n</text>
            <path d='M-0.413,10.000 C-0.286,10.000 -0.160,10.000 0.000,10.000 C0.160,10.000 0.352,10.000 0.583,10.000 C0.813,10.000 1.082,10.000 1.406,10.000 C1.730,10.000 2.110,10.000 2.569,10.000 C3.027,10.000 3.564,10.000 4.211,10.000 C4.858,10.000 5.616,10.000 6.531,10.000 C7.445,10.000 8.516,10.000 9.808,10.000 C11.099,10.000 12.612,10.000 14.436,10.000 C16.261,10.000 18.397,10.000 20.975,10.000 C23.552,10.000 26.570,10.000 30.210,10.000 C33.851,10.000 38.114,10.000 43.256,10.000 C48.398,10.000 54.420,10.000 61.683,10.000 C68.946,10.000 77.451,10.000 87.713,10.000 C97.974,10.000 109.991,10.000 124.480,10.000 C138.969,10.000 155.928,10.000 176.415,10.000 C196.903,10.000 220.918,10.000 249.776,10.000 C278.634,10.000 312.336,10.000 353.401,10.000 C394.466,10.000 442.894,10.000 499.775,10.000 C556.656,10.000 621.989,10.000 706.533,10.000 C791.077,10.000 894.832,10.000 998.587,10.000 ' stroke='#33cc00' stroke-width='1' fill='none' />
            <text transform="scale(0.2 -0.2)" width="150" height="50" x="475" y="-60">1</text>
        </g>
    </svg>

    <!--[[[end]]]-->
</div>

<div class="text"><!-- {{{ -->

<p>No discussion of big-O notation would be complete without showing a graph of
how various complexities grow.  Here the x-axis is the growth of data, and the
y-axis is running time.  There are no units here, because as with all the rest
of this discussion, we are only looking for a rough characterization of how the
running time relates to the data size.</p>

<p>You can see here that N<sup>2</sup> can get really bad really fast.  If there's
one thing to take away from this entire talk, it's "avoid N<sup>2</sup>".</p>

</div><!-- }}} -->


<div class="slide">
    <h1>Python time complexities</h1>
    <table style="float:left;margin-right: 0em">
        <tr><th colspan='2'>Lists</th></tr>
        <tr><td><tt>mylist.append(val)  </tt></td><td>O(1)</td></tr>
        <tr><td><tt>mylist[i]           </tt></td><td>O(1)</td></tr>
        <tr><td><tt>val in mylist       </tt></td><td style="position:relative">O(N)<span class="incremental cell_highlight o_n">O(N)</span></td></tr>
        <tr><td><tt>for val in mylist:  </tt></td><td>O(N)</td></tr>
        <tr><td><tt>mylist.sort()       </tt></td><td>O(N log N)</td></tr>
    </table>
    <table style="float:right;margin-right: 0em">
        <tr><th colspan='2'>Dicts</th></tr>
        <tr><td><tt>mydict[key] = val   </tt></td><td>O(1)</td></tr>
        <tr><td><tt>mydict[key]         </tt></td><td>O(1)</td></tr>
        <tr><td><tt>key in mydict       </tt></td><td style="position:relative">O(1)<span class="incremental cell_highlight o_1">O(1)</span></td></tr>
        <tr><td><tt>for key in mydict:  </tt></td><td>O(N)</td></tr>
    </table>
    <table style="float:right;margin-right: 0em; margin-top: 1em">
        <tr><th colspan='2'>Sets</th></tr>
        <tr><td><tt>myset.add(val)      </tt></td><td>O(1)</td></tr>
        <tr><td><tt>val in myset        </tt></td><td style="position:relative">O(1)<span class="incremental cell_highlight o_1">O(1)</span></td></tr>
        <tr><td><tt>for val in myset:   </tt></td><td>O(N)</td></tr>
    </table>
    <div style="position:absolute;left:3em;bottom:8em;">
        <p class="incremental">Pro-tip: replace lists with sets</p>
    </div>
</div>

<div class="text"><!-- {{{ -->

<p>To analyze your code, you have to understand the complexities of the Python
primitives you'll be using.  These tables show the typical time complexity of
common Python operations.</p>

</div><!-- }}} -->


<div class="slide">
    <!-- Slow/Fast {{{ -->
    <div style="float: left; width=50%;">
        <h1 style="margin-top: 0">Slow</h1>
        <div style="position: relative; width=100%">
            <pre class="python small" style="margin-top:0">
                def __init__(self):
                    self.items = []

                def __getitem__(self, pt):
                    for key, value in self.items:
                        if key == pt:
                            return value

                    value = []
                    self.items.append((pt, value))
                    return value
            </pre>
            <div class="incremental" style="margin-top:5em; width:3em;">
                <p class="o_1">&nbsp;&nbsp;O(1)</p>
                <p class="o_n">&nbsp;&nbsp;O(N)</p>
            </div>
            <pre class="python small incremental" style="position: absolute; top:0; left:0; margin-top:0">
                def __init__(self):
                    self.items = []

                def __getitem__(self, pt):
                    <span class="o_n">for key, value in self.items:</span>
                        if key == pt:
                            return value

                    value = []
                    <span class="o_1">self.items.append((pt, value))</span>
                    return value
            </pre>
        </div>
    </div>
    <div style="position: absolute; top:0; right:0;width=50%">
        <h1 style="margin-top: 0">Fast</h1>
        <div style="position: relative; width=100%; padding-right: 2em">
            <pre class="python small" style="margin-top:0">
                def __init__(self):
                    self.items = {}     # pt -> value
                    self.rounds = {}    # pt -> pt

                def __getitem__(self, pt):
                    val = self.items.get(pt)
                    if val is not None:
                        return val

                    for jitter in [0, 0.5]:
                        pt_rnd = rounded(pt, jitter)
                        pt0 = self.rounds.get(pt_rnd)
                        if pt0 is not None:
                            return self.items[pt0]

                    self.items[pt] = val = []
                    for jitter in [0, 0.5]:
                        pt_rnd = rounded(pt, jitter)
                        self.rounds[pt_rnd] = pt

                    return val
            </pre>
            <pre class="python small incremental" style="position: absolute; top:0; left:0; margin-top:0">
                def __init__(self):
                    self.items = {}     # pt -> value
                    self.rounds = {}    # pt -> pt

                def __getitem__(self, pt):
                    val = <span class="o_1">self.items.get(pt)</span>
                    if val is not None:
                        return val

                    for jitter in [0, 0.5]:
                        pt_rnd = rounded(pt, jitter)
                        pt0 = <span class="o_1">self.rounds.get(pt_rnd)</span>
                        if pt0 is not None:
                            return <span class="o_1">self.items[pt0]</span>

                    <span class="o_1">self.items[pt] = val = []</span>
                    for jitter in [0, 0.5]:
                        pt_rnd = rounded(pt, jitter)
                        <span class="o_1">self.rounds[pt_rnd] = pt</span>

                    return val
            </pre>
        </div>
    </div>
    <!-- }}} -->
</div>

<div class="slide">
    <img style="float:right;border: 1px solid #888;width:70%" src="straps.png" />
    <h1>Results</h1>
    <div style='font-size: 120%'>
        <p class="incremental">~2100 points</p>
        <p class="incremental">slow: <b>20</b> sec</p>
        <p class="incremental">fast: <b>0.4</b> sec!</p>
    </div>
</div>

<div class="slide">
    <h1>Small numbers</h1>
    <div style="position:relative">
    <!--[[[cog
    draw_the_graph(10, axis_labels=False, css_class="lefthalf")
    ]]]-->
    <svg class="lefthalf" viewBox="0 0 1000 650">
        <g transform="translate(0 650) scale(10, -10)">
            <rect fill="white" stroke="#333" stroke-width="0.5" height="100%" width="100%" x="0" y="0"/>
            <path d='M-0.413,0.170 C-0.286,0.087 -0.160,0.003 0.000,0.000 C0.160,-0.003 0.352,0.073 0.583,0.340 C0.813,0.606 1.082,1.062 1.406,1.976 C1.730,2.891 2.110,4.263 2.569,6.597 C3.027,8.932 3.563,12.228 4.211,17.731 C4.859,23.235 5.618,30.945 6.531,42.651 C7.443,54.356 8.509,70.057 9.808,96.190 C11.106,122.323 12.638,158.890 14.436,208.409 C16.235,257.929 18.301,320.403 20.975,439.937 C23.648,559.471 26.929,736.065 30.210,912.659 ' stroke='#ff3333' stroke-width='1' fill='none' />
            <path d='M-0.413,3.095 C-0.286,3.049 -0.160,3.003 0.000,3.000 C0.160,2.997 0.352,3.038 0.583,3.149 C0.813,3.260 1.082,3.442 1.406,3.748 C1.730,4.055 2.110,4.486 2.569,5.122 C3.027,5.758 3.564,6.599 4.211,7.772 C4.858,8.944 5.616,10.447 6.531,12.473 C7.445,14.499 8.516,17.048 9.808,20.414 C11.099,23.781 12.612,27.964 14.436,33.408 C16.261,38.853 18.397,45.559 20.975,54.204 C23.552,62.850 26.571,73.435 30.210,86.958 C33.850,100.482 38.110,116.943 43.256,137.923 C48.402,158.903 54.434,184.401 61.683,216.472 C68.932,248.542 77.398,287.185 87.713,336.612 C98.028,386.038 110.192,446.247 124.480,519.211 C138.768,592.174 155.179,677.891 176.415,795.276 C197.652,912.661 223.714,1061.713 249.776,1210.766 ' stroke='#ff9933' stroke-width='1' fill='none' />
            <path d='M-0.413,5.587 C-0.286,5.714 -0.160,5.840 0.000,6.000 C0.160,6.160 0.352,6.352 0.583,6.583 C0.813,6.813 1.082,7.082 1.406,7.406 C1.730,7.730 2.110,8.110 2.569,8.569 C3.027,9.027 3.564,9.564 4.211,10.211 C4.858,10.858 5.616,11.616 6.531,12.531 C7.445,13.445 8.516,14.516 9.808,15.808 C11.099,17.099 12.612,18.612 14.436,20.436 C16.261,22.261 18.397,24.397 20.975,26.975 C23.552,29.552 26.570,32.570 30.210,36.210 C33.851,39.851 38.114,44.114 43.256,49.256 C48.398,54.398 54.420,60.420 61.683,67.683 C68.946,74.946 77.451,83.451 87.713,93.713 C97.974,103.974 109.991,115.991 124.480,130.480 C138.969,144.969 155.928,161.928 176.415,182.415 C196.903,202.903 220.918,226.918 249.776,255.776 C278.634,284.634 312.336,318.336 353.401,359.401 C394.466,400.466 442.894,448.894 499.775,505.775 C556.656,562.656 621.989,627.989 706.533,712.533 C791.077,797.077 894.832,900.832 998.587,1004.587 ' stroke='#0088ff' stroke-width='1' fill='none' />
            <path d='M-0.413,-3.192 C-0.286,-2.094 -0.160,-0.996 0.000,0.000 C0.160,0.996 0.352,1.890 0.583,2.755 C0.813,3.620 1.082,4.457 1.406,5.267 C1.730,6.078 2.110,6.863 2.569,7.633 C3.027,8.403 3.564,9.159 4.211,9.904 C4.858,10.650 5.616,11.385 6.531,12.114 C7.445,12.843 8.516,13.564 9.808,14.282 C11.099,14.999 12.612,15.711 14.436,16.420 C16.261,17.130 18.397,17.836 20.975,18.539 C23.552,19.243 26.570,19.945 30.210,20.644 C33.851,21.344 38.114,22.043 43.256,22.740 C48.398,23.437 54.420,24.133 61.683,24.829 C68.946,25.524 77.451,26.218 87.713,26.912 C97.974,27.606 109.991,28.300 124.480,28.993 C138.969,29.686 155.928,30.379 176.415,31.071 C196.903,31.763 220.918,32.455 249.776,33.147 C278.634,33.839 312.336,34.531 353.401,35.223 C394.466,35.914 442.894,36.606 499.775,37.297 C556.656,37.988 621.989,38.680 706.533,39.371 C791.077,40.062 894.832,40.753 998.587,41.444 ' stroke='#00aa99' stroke-width='1' fill='none' />
            <path d='M-0.413,10.000 C-0.286,10.000 -0.160,10.000 0.000,10.000 C0.160,10.000 0.352,10.000 0.583,10.000 C0.813,10.000 1.082,10.000 1.406,10.000 C1.730,10.000 2.110,10.000 2.569,10.000 C3.027,10.000 3.564,10.000 4.211,10.000 C4.858,10.000 5.616,10.000 6.531,10.000 C7.445,10.000 8.516,10.000 9.808,10.000 C11.099,10.000 12.612,10.000 14.436,10.000 C16.261,10.000 18.397,10.000 20.975,10.000 C23.552,10.000 26.570,10.000 30.210,10.000 C33.851,10.000 38.114,10.000 43.256,10.000 C48.398,10.000 54.420,10.000 61.683,10.000 C68.946,10.000 77.451,10.000 87.713,10.000 C97.974,10.000 109.991,10.000 124.480,10.000 C138.969,10.000 155.928,10.000 176.415,10.000 C196.903,10.000 220.918,10.000 249.776,10.000 C278.634,10.000 312.336,10.000 353.401,10.000 C394.466,10.000 442.894,10.000 499.775,10.000 C556.656,10.000 621.989,10.000 706.533,10.000 C791.077,10.000 894.832,10.000 998.587,10.000 ' stroke='#33cc00' stroke-width='1' fill='none' />
        </g>
    </svg>

    <!--[[[end]]]-->
    <svg class="lefthalf incremental" viewBox="0 0 1000 650">
        <g transform="translate(0 650) scale(10, -10)">
            <rect fill="none" stroke="#333" stroke-width="0.5" height="13" width="20" x="0" y="0"/>
        </g>
    </svg>

    <!--[[[cog
    draw_the_graph(50, axis_labels=False, stroke_width=.2, css_class="lefthalf incremental")
    ]]]-->
    <svg class="lefthalf incremental" viewBox="0 0 1000 650">
        <g transform="translate(0 650) scale(50, -50)">
            <rect fill="white" stroke="#333" stroke-width="0.1" height="100%" width="100%" x="0" y="0"/>
            <path d='M-0.413,0.170 C-0.286,0.087 -0.160,0.003 0.000,0.000 C0.160,-0.003 0.352,0.073 0.583,0.340 C0.813,0.606 1.082,1.062 1.406,1.976 C1.730,2.891 2.110,4.263 2.569,6.597 C3.027,8.932 3.563,12.228 4.211,17.731 C4.859,23.235 5.618,30.945 6.531,42.651 C7.443,54.356 8.509,70.057 9.808,96.190 C11.106,122.323 12.638,158.890 14.436,208.409 C16.235,257.929 18.301,320.403 20.975,439.937 C23.648,559.471 26.929,736.065 30.210,912.659 ' stroke='#ff3333' stroke-width='0.2' fill='none' />
            <path d='M-0.413,3.095 C-0.286,3.049 -0.160,3.003 0.000,3.000 C0.160,2.997 0.352,3.038 0.583,3.149 C0.813,3.260 1.082,3.442 1.406,3.748 C1.730,4.055 2.110,4.486 2.569,5.122 C3.027,5.758 3.564,6.599 4.211,7.772 C4.858,8.944 5.616,10.447 6.531,12.473 C7.445,14.499 8.516,17.048 9.808,20.414 C11.099,23.781 12.612,27.964 14.436,33.408 C16.261,38.853 18.397,45.559 20.975,54.204 C23.552,62.850 26.571,73.435 30.210,86.958 C33.850,100.482 38.110,116.943 43.256,137.923 C48.402,158.903 54.434,184.401 61.683,216.472 C68.932,248.542 77.398,287.185 87.713,336.612 C98.028,386.038 110.192,446.247 124.480,519.211 C138.768,592.174 155.179,677.891 176.415,795.276 C197.652,912.661 223.714,1061.713 249.776,1210.766 ' stroke='#ff9933' stroke-width='0.2' fill='none' />
            <path d='M-0.413,5.587 C-0.286,5.714 -0.160,5.840 0.000,6.000 C0.160,6.160 0.352,6.352 0.583,6.583 C0.813,6.813 1.082,7.082 1.406,7.406 C1.730,7.730 2.110,8.110 2.569,8.569 C3.027,9.027 3.564,9.564 4.211,10.211 C4.858,10.858 5.616,11.616 6.531,12.531 C7.445,13.445 8.516,14.516 9.808,15.808 C11.099,17.099 12.612,18.612 14.436,20.436 C16.261,22.261 18.397,24.397 20.975,26.975 C23.552,29.552 26.570,32.570 30.210,36.210 C33.851,39.851 38.114,44.114 43.256,49.256 C48.398,54.398 54.420,60.420 61.683,67.683 C68.946,74.946 77.451,83.451 87.713,93.713 C97.974,103.974 109.991,115.991 124.480,130.480 C138.969,144.969 155.928,161.928 176.415,182.415 C196.903,202.903 220.918,226.918 249.776,255.776 C278.634,284.634 312.336,318.336 353.401,359.401 C394.466,400.466 442.894,448.894 499.775,505.775 C556.656,562.656 621.989,627.989 706.533,712.533 C791.077,797.077 894.832,900.832 998.587,1004.587 ' stroke='#0088ff' stroke-width='0.2' fill='none' />
            <path d='M-0.413,-3.192 C-0.286,-2.094 -0.160,-0.996 0.000,0.000 C0.160,0.996 0.352,1.890 0.583,2.755 C0.813,3.620 1.082,4.457 1.406,5.267 C1.730,6.078 2.110,6.863 2.569,7.633 C3.027,8.403 3.564,9.159 4.211,9.904 C4.858,10.650 5.616,11.385 6.531,12.114 C7.445,12.843 8.516,13.564 9.808,14.282 C11.099,14.999 12.612,15.711 14.436,16.420 C16.261,17.130 18.397,17.836 20.975,18.539 C23.552,19.243 26.570,19.945 30.210,20.644 C33.851,21.344 38.114,22.043 43.256,22.740 C48.398,23.437 54.420,24.133 61.683,24.829 C68.946,25.524 77.451,26.218 87.713,26.912 C97.974,27.606 109.991,28.300 124.480,28.993 C138.969,29.686 155.928,30.379 176.415,31.071 C196.903,31.763 220.918,32.455 249.776,33.147 C278.634,33.839 312.336,34.531 353.401,35.223 C394.466,35.914 442.894,36.606 499.775,37.297 C556.656,37.988 621.989,38.680 706.533,39.371 C791.077,40.062 894.832,40.753 998.587,41.444 ' stroke='#00aa99' stroke-width='0.2' fill='none' />
            <path d='M-0.413,10.000 C-0.286,10.000 -0.160,10.000 0.000,10.000 C0.160,10.000 0.352,10.000 0.583,10.000 C0.813,10.000 1.082,10.000 1.406,10.000 C1.730,10.000 2.110,10.000 2.569,10.000 C3.027,10.000 3.564,10.000 4.211,10.000 C4.858,10.000 5.616,10.000 6.531,10.000 C7.445,10.000 8.516,10.000 9.808,10.000 C11.099,10.000 12.612,10.000 14.436,10.000 C16.261,10.000 18.397,10.000 20.975,10.000 C23.552,10.000 26.570,10.000 30.210,10.000 C33.851,10.000 38.114,10.000 43.256,10.000 C48.398,10.000 54.420,10.000 61.683,10.000 C68.946,10.000 77.451,10.000 87.713,10.000 C97.974,10.000 109.991,10.000 124.480,10.000 C138.969,10.000 155.928,10.000 176.415,10.000 C196.903,10.000 220.918,10.000 249.776,10.000 C278.634,10.000 312.336,10.000 353.401,10.000 C394.466,10.000 442.894,10.000 499.775,10.000 C556.656,10.000 621.989,10.000 706.533,10.000 C791.077,10.000 894.832,10.000 998.587,10.000 ' stroke='#33cc00' stroke-width='0.2' fill='none' />
        </g>
    </svg>

    <!--[[[end]]]-->
    </div>
    <img class="incremental" style="position:absolute;right:3.5em;top:2em;width:40%" src="fancy-algorithms.png" />
</div>

<div class="slide">
    <h1>Advanced</h1>
    <ul>
    <li class="incremental">Typical case vs worst case</li>
    <li class="incremental">Amortization</li>
    <li class="incremental">Lots more math</li>
    </ul>
</div>


<div class="slide" data-layout="clean">
    <h1>Experts</h1>
    <img class='incremental' src='blogpost.png' height='100%'/>
    <img class='incremental' src='shame.png' width='95%' style='position:absolute;top:8em;left:.5em;border: 1px solid #888; border-radius: 10px'/>
</div>

<div class="slide">
    <h1>Summary</h1>
    <ul>
    <li class="incremental">Big-O is useful</li>
    <li class="incremental">Big-O doesn't have to be complicated</li>
    <li class="incremental">You can do the thing</li>
    </ul>
</div>


<div class="slide title" data-layout="clean">
    <h1 style="padding-top: 0em">Thanks</h1>
    <h2 style="margin-top: 5em"><a class="implicit" href="http://twitter.com/nedbat"><span class="punct">@</span>nedbat</a></h2>
    <h2><a class="implicit" href="http://bit.ly/bigopy"><span class="punct">http://</span>bit.ly<span class="punct">/</span>bigopy</a></h2>
</div>


<!-- ** Layouts {{{ -->
<div class="layout" data-name="default">
    <content></content>
    <div class="footer">
        <span class="left"><a class="implicit" href="http://bit.ly/bigopy">bit.ly<span class='punct'>/</span>bigopy</a></span>
        <span class="right"><a class="implicit" href="http://twitter.com/nedbat"><span class='punct'>@</span>nedbat</a></span>
        <hr class="defloat" />
    </div>
</div>

<div class="layout nofooter" data-name="clean">
    <content></content>
</div>
<!-- }}} -->

</body>
</html>
